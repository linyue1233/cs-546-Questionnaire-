<div>
    {{!-- Show only if current user if the poster of the question --}}
    <div class="card">
        <div class="card-body">
        {{#if currentUserPostedQuestion}}
            <span><h1>{{questionInfo.title}}</h1>
                <p>{{questionInfo.description}}</p>
                <div class="votingsystem">
                    {{#if thisUserUpvoted}}
                        <i class="fas fa-thumbs-up upvote" data-id="/questions/{{questionInfo._id}}/upvote"></i>
                    {{/if}}
                    {{#unless thisUserUpvoted}}
                        <i class="far fa-thumbs-up upvote" data-id="/questions/{{questionInfo._id}}/upvote"></i>
                    {{/unless}}
                    <span class="label label-primary votecounter">{{ questionInfo.votes }}</span>
                    {{#if thisUserDownvoted}}
                        <i class="fas fa-thumbs-down downvote" data-id="/questions/{{questionInfo._id}}/downvote"></i>
                    {{/if}}
                    {{#unless thisUserDownvoted}}
                        <i class="far fa-thumbs-down downvote" data-id="/questions/{{questionInfo._id}}/downvote"></i>
                    {{/unless}}
                </div>      
            <a>{{ post.title }}</a>
            <div class="card float-right">
                    <div class="card-header">
                        Poster Details
                    </div>
                    <div class="card-body">
                        {{#if questionInfo.anonymous}}
                            <p>Posted By: Anonymous user</p>
                        {{else}}
                            <p>Posted By: <a href="/users/{{questionPoster._id}}/profile">{{questionPoster.displayName}}</a></p>
                        {{/if}}
                        <p>Posted On: {{questionInfo.friendlyCreatedAt}}</p>
                        <p>Last Updated On: {{ questionInfo.friendlyUpdatedAt}}</p>
                    </div>
                </div>
            <br>
            {{#if userLoggedIn}}
            <button class="btn btn-light"><a href="/questions/{{questionInfo._id}}/edit">Edit</a></button>
            <button class="btn btn-light"><a href="/questions/{{questionInfo._id}}/delete">Delete</a></button>
            {{#if userReportedQuestion}}
                <span class="btn-place">
                    <button class="btn btn-secondary" disabled>Flagged For Review</button>
                    </span>
                {{/if}}
                {{#unless userReportedQuestion}}
                <span class="btn-place">
                    <button class="btn btn-danger" id="reportQuestion" data-id="/questions/{{questionInfo._id}}/report">Report</button>
                </span>
                {{/unless}}
            {{/if}}
        {{/if}}
        
        {{#unless currentUserPostedQuestion}}
        <span><h1>{{questionInfo.title}}</h1>
            <div class="card float-right">
                    <div class="card-header">
                        Poster Details
                    </div>
                    <div class="card-body">
                        {{#if questionInfo.anonymous}}
                            <p>Posted By: Anonymous user</p>
                        {{else}}
                            <p>Posted By: <a href="/users/{{questionPoster._id}}/profile">{{questionPoster.displayName}}</a></p>
                        {{/if}}
                <p>Posted On: {{questionInfo.friendlyCreatedAt}}</p>
                <p>Last Updated On: {{ questionInfo.friendlyUpdatedAt}}</p>
                </div>
                
                </span>
            </div>
        <p>{{questionInfo.description}}</p>
        <div class="votingsystem">
                {{#if thisUserUpvoted}}
                        <i class="fas fa-thumbs-up upvote" data-id="/questions/{{questionInfo._id}}/upvote"></i>
                    {{/if}}
                    {{#unless thisUserUpvoted}}
                        <i class="far fa-thumbs-up upvote" data-id="/questions/{{questionInfo._id}}/upvote"></i>
                    {{/unless}}
                    <span class="label label-primary votecounter">{{ questionInfo.votes }}</span>
                    {{#if thisUserDownvoted}}
                        <i class="fas fa-thumbs-down downvote" data-id="/questions/{{questionInfo._id}}/downvote"></i>
                    {{/if}}
                    {{#unless thisUserDownvoted}}
                        <i class="far fa-thumbs-down downvote" data-id="/questions/{{questionInfo._id}}/downvote"></i>
                    {{/unless}}
        </div>
        {{#if userLoggedIn}}
            {{#if userReportedQuestion}}
            <div class="btn-place">
                 <button class="btn btn-secondary" disabled>Flagged For Review</button>
            </div>
            {{/if}}
            {{#unless userReportedQuestion}}
            <div class="btn-place">
               <button class="btn btn-danger" id="reportQuestion" data-id="/questions/{{questionInfo._id}}/report">Report</button>
            {{/unless}}
            </div>
        {{/if}}
        {{/unless}}
        <hr>
        {{#each questionInfo.tags}}
            <span class="badge badge-pill badge-info">{{this}}</span>
        {{/each}}
        </div>    
        <p>
        </p>
    </div>

<hr>

    {{#if questionInfo.answers.length}}
    <h2>Answers</h2>
    <ul class="list-group card border-0">
        {{#each questionInfo.answers}}    
        <li class="list-group-item p-0 mb-1">
            <p class="h3 font-weight-normal card-body">{{{this.description}}}</p>
            {{#if acceptedAnswer}}
            <div class="alert alert-success mb-0">This answer has been accepted by the admin</div>
            {{/if}}
            <div class="card-header border-0">
            <h5 class="lead">Posted By <a href="/users/{{this.posterId}}/profile">{{this.displayName}}</a></h5>
            {{#if posterUser}}
            <form method="post" action="/questions/{{../questionInfo._id}}/acceptedAnswer/{{this._id}}">
            <button type="submit" class="btn btn-sm btn-light" id="accepted-ans-btn">Accept Answer</button>
            </form>
            {{/if}}
            {{#if currUser}}
            <div class="btn-group">
                <a href='/questions/{{../questionInfo._id}}/answers/{{this._id}}/edit'><button class="btn btn-sm btn-light">Edit</button></a>&nbsp;
                <form method="post" action="/questions/{{../questionInfo._id}}/answers/{{this._id}}">
                    <button type="submit" class="btn btn-sm btn-light">Delete</button>
                    <input name="_method" type="hidden" value="delete">
                </form>
            </div>
            </div>
            {{/if}}
        </li>
        {{/each}}
    </ul>
    {{/if}}
</div>
<hr>
{{#if userLoggedIn}}
<h2>Post your answer here</h3>
    {{!-- build a rich text box to submit answer --}}
    {{!-- action need to modify --}}
    <form id="" action="/questions/{{questionInfo._id}}/answers/create/" class="input-group d-inline-block" method="post">
        <textarea name="description" id="description" class="form-control w-100" rows="3" aria-label="" required></textarea>
        <br>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form><br><br>
    <div class="alert alert-warning alert-dismissible fade hide" id="ans-err" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {{/if}}
    {{#unless userLoggedIn}}
    <h3>Contribute to this discussion by <a href="/site/login">logging in here.</a></h3>
    {{/unless}}
</div>
